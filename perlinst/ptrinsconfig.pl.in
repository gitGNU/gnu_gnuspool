#   Copyright 2013 Free Software Foundation, Inc.
#
#  This program is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with this program.  If not, see <http://www.gnu.org/licenses/>.

# This is autogenerated from the configure script from perlinst/ptrinsconfig.pl.in
# to get the default names correct

# We set up a hash %Config giving the current locations (LOC) the default locations (DEFLOC) and the descriptions

$datarootdir = substitute("@datarootdir@");

%Config = (SPOOLDIR => { LOC => substitute("@spooldir@"),   DEFLOC => substitute("@spooldir@"),
                         DESCR => 'Spool directory for pending print jobs' },   
           SPROGDIR => { LOC => substitute("@pkgexecdir@"), DEFLOC => substitute("@pkgexecdir@"),
                         DESCR => 'Location of internal programs' },
           SDATADIR => { LOC => substitute("@pkgdatadir@"),   DEFLOC => substitute("@pkgdatadir@"),
                         DESCR => 'Location of internal data' },
           SPHELPDIR => { LOC => substitute("@sphelpdir@"), DEFLOC => substitute("@sphelpdir@"),
                         DESCR => 'Location of help files' },
           SPOOLPT => {  LOC => substitute("@spoolpt@"), DEFLOC => substitute("@spoolpt@"),
                         DESCR => 'Location of printer setup files' },
           USERPATH => { LOC => substitute("@bindir@"), DEFLOC => substitute("@bindir@"),
                         DESCR => 'Location for user programs' } );

# If there is a master config file, slurp it in

$Master_config = substitute("@sysconfdir@/gnuspool.conf");
$Master_config = "/usr/local/etc/gnuspool.conf" if $Master_config =~ /\@/;

if  (open(MC, $Master_config))  {
        while  (<MC>)  {
                chop;
                s/#.*//;
                next unless /(\w+)[:=](\S+)/;
                $Config{$1}->{LOC} = $2;
        }
        close MC;
}
elsif (defined($ENV{USERPATH})) {
    # If we defined USERPATH in the environment, set that now
    # For benefit of super-config scripts
    $Config{USERPATH}->{LOC} = $ENV{USERPATH};
}

# Remember common cases of USERPATH and SPROGDIR plus the includes for Perl and the help files

$USERPATH = $Config{USERPATH}->{LOC};
$SPROGDIR = $Config{SPROGDIR}->{LOC};
$SDATADIR = $Config{SDATADIR}->{LOC};
$SPOOLPT = $Config{SPOOLPT}->{LOC};
$PERLINST = "$SPROGDIR/perlinst";
$INSTHELP = "$SDATADIR/insthelp";

unless (-d $PERLINST)  {
    print "Sorry cannot find installation routine directory $PERLINST\n";
    exit 10;
}

# Finally set up the name of the system user

$Sysuser = '@SPOOLUSER@';

1;
