.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.13)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "GSPL-RIPC 8"
.TH GSPL-RIPC 8 "2009-05-18" "GNUspool Release 1" "GNUspool Print Manager"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
gspl\-ripc \- trace and clean GNUspool IPC facilities
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBgspl-ripc\fR
[ \fI\-d\fR ]
[ \fI\-r\fR ]
[ \fI\-F\fR ]
[ \fI\-A\fR ]
[ \fI\-D secs\fR ]
[ \fI\-P psarg\fR ]
[ \fI\-G\fR ]
[ \fI\-n\fR ]
[ \fI\-o file\fR ]
[ \fI\-S dir\fR ]
[ \fI\-x\fR ]
[ \fI\-B n\fR ]
[ \fI\-N char\fR ]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBgspl-ripc\fR traces, monitors problems with or deletes \s-1IPC\s0 facilities used by
\&\fBGNUspool\fR. Many of the facilities are used for debugging, but it also
serves as a quick method of deleting the \s-1IPC\s0 facilities, being easier
to use than \fBipcs\fR and \fBipcrm\fR, in the event that the scheduler has
crashed or been killed without deleting the \s-1IPC\s0 facilities.
.PP
To use this facility, just run \fBgspl-ripc\fR thus:
.PP
.Vb 1
\&        gspl\-ripc \-d >/dev/null
.Ve
.PP
The diagnostic output may be useful as it reports any inconsistencies.
.PP
The monitoring option can be used to diagnose processes, possibly not
\&\fBGNUspool\fR ones, which are interfering with \fBGNUspool\fR shared memory
segments, in cases where a third-party application is suspected of
damaging the shared memory.
.PP
\&\fBGspl-ripc\fR also checks for errors in memory-mapped files where the
version of \fBGNUspool\fR is using those rather than shared memory.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\-A" 4
.IX Item "-A"
Display details of jobs and printers. This often generates a lot of
output and is not really necessary.
.IP "\-D \fIsecs\fR" 4
.IX Item "-D secs"
Monitor which process has last attached to shared memory segments and
report changes, polling every \fIsecs\fR seconds.
.IP "\-d" 4
.IX Item "-d"
Delete the \s-1IPC\s0 facilities after printing out contents. This saves
messing with arguments to \fIipcrm\fR\|(1).
.IP "\-f" 4
.IX Item "-f"
Display the free chains for jobs and printers in shared memory. This
generates a lot of output and isn't usually necessary.
.IP "\-n" 4
.IX Item "-n"
Suppress display from \fB\-D\fR option if everything is \s-1OK\s0.
.IP "\-o \fIoutfile\fR" 4
.IX Item "-o outfile"
Output to \fIoutfile\fR rather than standard output. Set it to 
\&\fI/dev/null\fR if you don't want to see any output. The output is passed
through \fIfgrep\fR\|(1) to find the line (if any) with the process id of the
process which last attached to the shared memory.
.IP "\-G" 4
.IX Item "-G"
Used in conjunction with the \fB\-P\fR option, the output from \fIps\fR\|(1) is
displayed in full, without passing it through \fIfgrep\fR\|(1).
.IP "\-P \fIpsarg\fR" 4
.IX Item "-P psarg"
Specify argument to \fIps\fR\|(1) to invoke if corruption detected when
monitoring with \fB\-D\fR option.
.IP "\-r" 4
.IX Item "-r"
Read and display the entries on the message queue. This is normally
suppressed because messages on the queue can't be \*(L"peeked at\*(R" or \*(L"unread\*(R".
.IP "\-S \fIdir\fR" 4
.IX Item "-S dir"
This is only relevant for versions of \fBGNUspool\fR which use
memory-mapped files rather than shared memory. It specifies the
location of the spool directory. If this is not specified, then the
master configuration file \fIgnuspool.conf\fR is consulted to find
the spool directory location, or failing that, the directory
\&\fI/var/spool/gnuspool\fR is used.
.IP "\-x" 4
.IX Item "-x"
Dump the contents of shared memory or memory-mapped files in
hexadecimal and \s-1ASCII\s0 characters.
.IP "\-B \fIn\fR" 4
.IX Item "-B n"
Where \fIn\fR may be 1 to 8, specify the width of the hexadecimal dump
output as a number of 32\-bit words.
.IP "\-N <char>" 4
.IX Item "-N <char>"
Replace the character in the \s-1ASCII\s0 part of the hexadecimal dump to
represent non-ASCII characters with the specified character (the first
character of the argument). The default is \f(CW\*(C`.\*(C'\fR.
.Sp
To specify a space, you may need to use quotes thus:
.Sp
.Vb 1
\&        \-N \*(Aq \*(Aq
.Ve
.SH "EXAMPLE"
.IX Header "EXAMPLE"
To delete all \s-1IPC\s0 facilities after \fBGNUspool\fR has crashed.
.PP
.Vb 1
\&        gspl\-ripc \-d \-o /dev/null
.Ve
.PP
To monitor the job shared memory segment for errors, printing out the
\&\fIps\fR\|(1) output (where the full listing is obtained with \f(CW\*(C`\-ef\*(C'\fR) search
for the process id of the last process to attach to the segment. Print
out the contents of the segment including in hexadecimal after
corruption is detected.
.PP
.Vb 1
\&        gspl\-ripc \-D 30 \-P \-ef \-o joblog \-A \-x
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgspl\-start\fR\|(1),
\&\fIspshed\fR\|(8).
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2009 Free Software Foundation, Inc.
This is free software. You may redistribute copies of it under the
terms of the \s-1GNU\s0 General Public License
<http://www.gnu.org/licenses/gpl.html>.
There is \s-1NO\s0 \s-1WARRANTY\s0, to the extent permitted by law.
.SH "AUTHOR"
.IX Header "AUTHOR"
John M Collins, Xi Software Ltd.
