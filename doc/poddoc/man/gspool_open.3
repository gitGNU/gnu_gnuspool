.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "gspool_open 3"
.TH gspool_open 3 "2009-02-17" "GNUspool Release 1" "GNUspool Print Manager"
.SH "NAME"
gspool_open \- open a connection to a GNUspool Host
.PP
gspool_login \- log in to GNUspool Host from Windows
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fB#include <gspool.h>\fR
.PP

\&\fBint gspool_open(const char *\fR\fIhost\fR\fB, const char *\fR\fIserv\fR\fB, const classcode_t\fR \fIcl\fR\fB)\fR
<br>
\&\fBint gspool_open(const char *\fR\fIhost\fR\fB, const char *\fR\fIserv\fR\fB, const char *\fR\fIuser\fR\fB, const classcode_t\fR \fIcl\fR\fB)\fR
<br>
\&\fBint gspool_login(const char *\fR\fIhost\fR\fB, const char *\fR\fIserv\fR\fB, const char *\fR\fIuser\fR\fB, char *\fR\fIpass\fR\fB, const classcode_t\fR \fIcl\fR\fB)\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBgspool_open\fR routine is used to commence a session with the \s-1API\s0. The
first form is that used on Unix or Linux hosts, the user name being
obtained from the effective user id invoking the routine.
.PP
The second form is that used on Windows hosts, where the Windows
machine has a static \s-1IP\s0 address and no password is required.
.PP
The third form is that used on Windows hosts with \s-1IP\s0 addresses
allocated via \s-1DHCP\s0 and/or a password is required.
.PP
\&\fIhost\fR is the name of the host to be connected to. \fIServ\fR is the
name of the \s-1TCP/UDP\s0 service to be used to connect to \fBGNUspool\fR.  If
this is set to \s-1NULL\s0, the default service will be used (but this must
be set up correctly).
.PP
\&\fIuser\fR is the Unix user name to be used on Windows hosts and \fIpass\fR
is the password. Note that this is not \f(CW\*(C`const\*(C'\fR, and the passed field
will be deliberately overwritten as soon as possible within
\&\fBgspool_login\fR. Also note that the password may not be the Unix password,
it may be an \fIinterface password\fR set up by \fIxipasswd\fR\|(8).
.PP
\&\fIcl\fR is the classcode to be used for access to all printer and job
operations. If 0 is used the user's default class code will be
used. Note that the class code bits are assigned starting at the least
significant bit, thus:
.PP
.Vb 10
\& 1 = A
\& 2 = B
\& 4 = C
\& ....
\& 0x8000 = P
\& 0x10000 = a
\& 0x20000 = b
\& 0x40000 = c
\& ....
\& 0x80000000 = p
.Ve
.SH "RETURN VALUES"
.IX Header "RETURN VALUES"
The functions return an integer descriptor on success, which will be
greater than or equal to 0. This descriptor should be used in all
subsequent operations with the \s-1API\s0.
If an error occurs, one of the following (negative) error codes will be returned.
.Ip "GSPOOL_BADWRITE" 8
failure writing to the network
.Ip "GSPOOL_BADREAD" 8
failure reading from the network
.Ip "GSPOOL_NOMEM" 8
out of memory accessing network
.Ip "GSPOOL_UNKNOWN_USER" 8
user name not known
.Ip "GSPOOL_NO_PASSWD" 8
password must be specified
.Ip "GSPOOL_PASSWD_INVALID" 8
invalid password

.PP
Each connection should also be terminated by a call to \fBgspool_close\fR or
exit from the calling program.
.SH "NOTES"
.IX Header "NOTES"
Any number of \s-1API\s0 sesssions, to the same host or to various hosts, may
be in progress simultaneously, subject to the restrictions on the
number of simultaneous open files per process which the operating
system allows.
.SH "EXAMPLE"
.IX Header "EXAMPLE"
An example to open a connection to host \*(L"xisl\*(R":
.PP
.Vb 5
\& int fd, ret;
\& fd = gspool_open("xisl", (char *) 0, 0);
\& if (fd < 0) { /* error handling */
\&     ...
\& }
.Ve
.PP
.Vb 1
\& /* process connection */
.Ve
.PP
.Vb 1
\& gspool_close(fd);
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgspool_close\fR\|(3),
\&\fIgspool_jobmon\fR\|(3),
\&\fIgspool_ptrmon\fR\|(3).
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2009 Free Software Foundation, Inc.
This is free software. You may redistribute copies of it under the
terms of the \s-1GNU\s0 General Public License
<http://www.gnu.org/licenses/gpl.html>.
There is \s-1NO\s0 \s-1WARRANTY\s0, to the extent permitted by law.
.SH "AUTHOR"
.IX Header "AUTHOR"
John M Collins, Xi Software Ltd.
