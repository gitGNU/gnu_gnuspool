<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>gspool_ptradd - add a new printer</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#return_values">RETURN VALUES</a></li>
	<li><a href="#example">EXAMPLE</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

-->


</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>gspool_ptradd - add a new printer</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<STRONG>#include &lt;gspool.h&gt;</STRONG>
<br><p><strong>int gspool_ptradd(const int</strong>
<em>fd</em><strong>, struct apispptr *</strong><em>ptrd</em><strong>)</strong></p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The function <strong>gspool_ptradd()</strong> is used to create a printer.</p>
<p><em>fd</em> is a file descriptor previously returned by <strong>gspool_open</strong></p>
<p><em>ptrd</em> is a <code>struct apispptr</code> describing the details of the
printer. It is defined in the file <strong>gspool.h</strong>.</p>
<p>The fields in <CODE>struct apispptr</CODE> are defined in the
gspool_ptrread(3) <a href="#Apispptr_def">documentation</a>.</p><p>Only values for the name, device, formtype, description, local flag, the minimun
and maximum job sizes, the network filter flag and the class code are
accepted. All other parameters are ignored. We suggest that you clear
all fields to zero before starting. Future releases with additional
fields will be guaranteed to default to the existing behaviour if the
additional fields are set to zero.</p>
<p>
</p>
<hr />
<h1><a name="return_values">RETURN VALUES</a></h1>
<p><strong>Xt_ptradd</strong> returns zero if successful, otherwise an error code will
be returned according to the reason for failure.</p>
<p>Error codes are <A HREF="TxtAPI-3.html#Error_codes">listed in Chapter
3</a>,</p><p>
</p>
<hr />
<h1><a name="example">EXAMPLE</a></h1>
<p>An example to add a printer called <code>hplj1</code> on device <code>/dev/tty12</code> with form type <code>a4</code></p>
<pre>
 int fd, ret;
 struct apispptr ptr;</pre>
<pre>
 fd = gspool_open(&quot;myhost&quot;, (char *) 0, 0);
 if (fd &lt; 0) { /* error handling */
     ...
 }</pre>
<pre>
 memset((void *) &amp;ptr, '\0', sizeof(ptr));
 ptr.apispp_class = 0xffffffff;
 ptr.apispp_minsize = ptr.apispp_maxsize = 0;
 strcpy(ptr.apispp_ptr, &quot;hplj1&quot;);
 strcpy(ptr.apispp_form, &quot;a4&quot;);
 strcpy(ptr.apispp_dev, &quot;tty12&quot;);
 strcpy(ptr.apispp_comment, &quot;My new printer&quot;);
 ret = gspool_ptradd(fd, &amp;ptr);
 if (ret &lt; 0) { /* error handling */
     ...
 }</pre>
<pre>
 gspool_close(fd);</pre>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><code>gspool_ptrread(3)</code>,
<code>gspool_ptrdel(3)</code>,
<code>gspool_ptrfind(3)</code>,
<code>gspool_ptrfindslot(3)</code>,
<code>gspool_ptrupd(3)</code>,
<code>gspool_ptrmon(3)</code>,
<code>gspool_ptrop(3)</code>.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2009 Free Software Foundation, Inc.
This is free software. You may redistribute copies of it under the
terms of the GNU General Public License
&lt;http://www.gnu.org/licenses/gpl.html&gt;.
There is NO WARRANTY, to the extent permitted by law.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>John M Collins, Xi Software Ltd.</p>

</body>

</html>
