<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>gspl-uchange - update or change user permissions</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#users_or_default">Users or default</a></li>
	<li><a href="#rebuilding_the_user_control_file">Rebuilding the user control file</a></li>
	<li><a href="#dumping_the_password_file">Dumping the password file</a></li>
	<ul>

		<li><a href="#privileges">Privileges</a></li>
	</ul>

	<li><a href="#files">FILES</a></li>
	<li><a href="#environment">ENVIRONMENT</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#diagnostics">DIAGNOSTICS</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

-->


</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>gspl-uchange - update or change user permissions</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>gspl-uchange</strong>
[ <em>-options</em> ]
[ users ]</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>gspl-uchange</strong> may be used to update the user permissions file giving
the user profiles of various users and the operations which they may
be permitted to perform within the <strong>GNUspool</strong> system, together with
the default permissions which are assigned by default to new
<strong>GNUspool</strong> users.</p>
<p>Further options allow for a &quot;password dump&quot; file to be
maintained. This is for the benefit of NIS-type environments where
reading through most of the password database can take an unacceptably
long time, the user name and userid hash table is maintained in a file
and updated as necessary.</p>
<p>The invoking user must have <em>edit admin file</em> permission.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p>The environment variable on which options are supplied is <a href="#gspl_uchange"><code>GSPL-UCHANGE</code></a> and the
environment variable to specify the help file is <a href="#sprestconf"><code>SPRESTCONF</code></a>.</p>
<dl>
<dt><strong><a name="or_explain" class="item">-? or +explain</a></strong></dt>

<dd>
<p>causes a summary of the other options to be displayed without taking
further action.</p>
</dd>
<dt><strong><a name="a_or_copy_defaults" class="item">-A or +copy-defaults</a></strong></dt>

<dd>
<p>copy the default profile to all users <em>before</em> setting other
permissions on the named users (with the <strong>-u</strong> option) or after
setting the defaults (with the <strong>-D</strong> option).</p>
<p>The privileges of the invoking user are not changed by this operation.</p>
</dd>
<dt><strong><a name="c_classcode_or_class_classcode" class="item">-c <em>classcode</em> or +class <em>classcode</em></a></strong></dt>

<dd>
<p>set the class code of the user(s) as specified by the argument.</p>
</dd>
<dt><strong><a name="d_or_set_defaults" class="item">-D or +set-defaults</a></strong></dt>

<dd>
<p>indicate that the other options are to apply to the default
profile for new users.</p>
</dd>
<dt><strong><a name="d_num_or_default_priority_num" class="item">-d <em>num</em> or +default-priority <em>num</em></a></strong></dt>

<dd>
<p>set the default job priority to <em>num</em>, which must be between 1 and 255.</p>
</dd>
<dt><strong><a name="f_pattern_or_form_allowed_pattern" class="item">-F <em>pattern</em> or +form-allowed <em>pattern</em></a></strong></dt>

<dd>
<p>set the permitted form types to match <em>pattern</em>.</p>
</dd>
<dt><strong><a name="f_formtype_or_default_form_formtype" class="item">-f <em>formtype</em> or +default-form <em>formtype</em></a></strong></dt>

<dd>
<p>set the default form type to <em>formtype</em>.</p>
</dd>
<dt><strong><a name="l_num_or_min_priority_num" class="item">-l <em>num</em> or +min-priority <em>num</em></a></strong></dt>

<dd>
<p>set the minimum job priority to <em>num</em>, which must be between 1 and 255.</p>
</dd>
<dt><strong><a name="m_num_or_max_priority_num" class="item">-m <em>num</em> or +max-priority <em>num</em></a></strong></dt>

<dd>
<p>set the maximum job priority to <em>num</em>, which must be between 1 and 255.</p>
</dd>
<dt><strong><a name="n_or_no_rebuild" class="item">-N or +no-rebuild</a></strong></dt>

<dd>
<p>cancel the <strong>-R</strong> option.</p>
</dd>
<dt><strong><a name="n_num_or_max_copies_num" class="item">-n <em>num</em> or +max-copies <em>num</em></a></strong></dt>

<dd>
<p>set the maximum number of copies to <em>num</em>, which must be between 1 and 255.</p>
</dd>
<dt><strong><a name="o_pattern_or_ptr_allowed_pattern" class="item">-O <em>pattern</em> or +ptr-allowed <em>pattern</em></a></strong></dt>

<dd>
<p>set the permitted printers to match <em>pattern</em>.</p>
</dd>
<dt><strong><a name="o_printer_or_default_ptr_printer" class="item">-o <em>printer</em> or +default-ptr <em>printer</em></a></strong></dt>

<dd>
<p>set the default printer to <em>printer</em>.</p>
</dd>
<dt><strong><a name="p_privileges_or_privileges_privileges" class="item">-p <em>privileges</em> or +privileges <em>privileges</em></a></strong></dt>

<dd>
<p>set the privileges of the user(s) as specified by the argument.</p>
</dd>
<dt><strong><a name="r_or_rebuild_file" class="item">-R or +rebuild-file</a></strong></dt>

<dd>
<p>rebuild the user permissions file <em class="file">spufile0</em>
incorporating any changes in the password list.</p>
</dd>
<dt><strong><a name="s_or_no_copy_defaults" class="item">-s or +no-copy-defaults</a></strong></dt>

<dd>
<p>cancel the effect of the <strong>-A</strong> option</p>
</dd>
<dt><strong><a name="u_or_set_users" class="item">-u or +set-users</a></strong></dt>

<dd>
<p>indicate that the other options are to apply to the users specified on
the rest of the command line.</p>
</dd>
<dt><strong><a name="x_or_dump_passwd" class="item">-X or +dump-passwd</a></strong></dt>

<dd>
<p>dump out the hash table of the password file to avoid re-reading the
password file within the other programs.</p>
</dd>
<dt><strong><a name="y_or_default_passwd" class="item">-Y or +default-passwd</a></strong></dt>

<dd>
<p>default handling of password hash file dump - rebuild if it is already
present and <strong>-R</strong> specified, otherwise not.</p>
</dd>
<dt><strong><a name="z_or_kill_dump_passwd" class="item">-Z or +kill-dump-passwd</a></strong></dt>

<dd>
<p>delete any existing dumped password hash file.</p>
</dd>
<dt><strong><a name="freeze_current" class="item">+freeze-current</a></strong></dt>

<dd>
<p>Save all the current options in a <em class="file">.gnuspool</em> file in the current
directory.</p>
</dd>
<dt><strong><a name="freeze_home" class="item">+freeze-home</a></strong></dt>

<dd>
<p>Save all the current options in a <em class="file">.gnuspool</em> file in the user's home
directory.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="users_or_default">Users or default</a></h1>
<p>In one operation <strong>gspl-uchange</strong> either adjusts the default permissions,
to be applied to new users, if <strong>-D</strong> is specified, or specified users,
if nothing or <strong>-u</strong> is specified. So first set the required defaults:</p>
<pre>
        gspl-uchange -D -n 20 -p Form,Prinq,Hgo,Cdef -A</pre>
<p>Then set named users</p>
<pre>
        gspl-uchange -p ALL jmc root spooler</pre>
<p>
</p>
<hr />
<h1><a name="rebuilding_the_user_control_file">Rebuilding the user control file</a></h1>
<p>After adding new users to the system, you should rebuild the user
control file by running</p>
<pre>
        gspl-uchange -R</pre>
<p>On a system with a large number of users, this can take a long time,
so the previous method of adding new users as they were encountered
meant that various hold-ups occurred in standard utilities or the
scheduler, whichever was the first to &quot;notice&quot; the changes, which
might, in the event, be half-complete.</p>
<p>We suggest that this command be added to the &quot;add new user&quot; procedure
for your installation.</p>
<p>
</p>
<hr />
<h1><a name="dumping_the_password_file">Dumping the password file</a></h1>
<p>When any of the <strong>GNUspool</strong> programs which may require to map numeric
user ids to names and vice versa start, one of the first operations is
to build the appropriate hash tables. This may take some time if there
are a large number of user names, especially if NIS (a.k.a. <em>yellow
pages</em>) is in use.</p>
<p>A short cut is to dump out the password file into a hash table file,
by default <em class="file">pwdump0</em>, which may be quickly read in by
the relevant programs instead of rebuilding the hash table each time.</p>
<p>You may opt to create the dumped password file by running</p>
<pre>
        gspl-uchange -X</pre>
<p>This should only be done when all <strong>GNUspool</strong> programs are stopped.</p>
<p>Afterwards, each time the user control file is rebuilt using the <strong>-R</strong>
option (or equivalents in other programs such as gspl-user(1)), this file
will also be rebuilt. <strong>-X</strong> does not have to be specified again.</p>
<p>If you ever decide you want to dispense with this file, run
<strong>gspl-uchange</strong> with the <strong>-Z</strong> option.</p>
<p>For completeness, the <strong>-Y</strong> option is provided to cancel <strong>-X</strong> or
<strong>-Z</strong> in case they are provided in the environment or a <em class="file">.gnuspool</em>
file, an extremely bad idea.</p>
<p>
</p>
<h2><a name="privileges">Privileges</a></h2>
<p>The following may be specified as the argument to <strong>-p</strong>, as one or
more (comma-separated) of the following codes, optionally preceded by
a minus to turn off the corresponding privilege. These codes are the
same as those displayed by gspl-ulist(1).</p>
<p><strong>Gspl-uchange</strong> disregards the case of the codes entered.</p>
<dl>
<dt><strong><a name="adm" class="item">Adm</a></strong></dt>

<dd>
<p>edit admin file</p>
</dd>
<dt><strong><a name="stp" class="item">Stp</a></strong></dt>

<dd>
<p>stop scheduler</p>
</dd>
<dt><strong><a name="form" class="item">Form</a></strong></dt>

<dd>
<p>select forms other than restriction pattern</p>
</dd>
<dt><strong><a name="otherp" class="item">Otherp</a></strong></dt>

<dd>
<p>select printers other than restriction pattern</p>
</dd>
<dt><strong><a name="cpri" class="item">Cpri</a></strong></dt>

<dd>
<p>change priority once queued</p>
</dd>
<dt><strong><a name="otherj" class="item">Otherj</a></strong></dt>

<dd>
<p>edit other users' jobs.</p>
</dd>
<dt><strong><a name="prinq" class="item">Prinq</a></strong></dt>

<dd>
<p>select printer list</p>
</dd>
<dt><strong><a name="hgo" class="item">Hgo</a></strong></dt>

<dd>
<p>stop and start printers</p>
</dd>
<dt><strong><a name="anyp" class="item">Anyp</a></strong></dt>

<dd>
<p>select any priority once queued</p>
</dd>
<dt><strong><a name="cdef" class="item">Cdef</a></strong></dt>

<dd>
<p>change own default priority within range</p>
</dd>
<dt><strong><a name="addp" class="item">Addp</a></strong></dt>

<dd>
<p>add and delete printers</p>
</dd>
<dt><strong><a name="cover" class="item">Cover</a></strong></dt>

<dd>
<p>override class</p>
</dd>
<dt><strong><a name="unq" class="item">Unq</a></strong></dt>

<dd>
<p>unqueue jobs</p>
</dd>
<dt><strong><a name="votj" class="item">Votj</a></strong></dt>

<dd>
<p>view (but not change) other users' jobs</p>
</dd>
<dt><strong><a name="remj" class="item">Remj</a></strong></dt>

<dd>
<p>access remote jobs</p>
</dd>
<dt><strong><a name="remp" class="item">Remp</a></strong></dt>

<dd>
<p>access remote printers</p>
</dd>
<dt><strong><a name="accessj" class="item">Accessj</a></strong></dt>

<dd>
<p>access non-displayed job attributes</p>
</dd>
<dt><strong><a name="freeze" class="item">Freeze</a></strong></dt>

<dd>
<p>freeze parameters from display</p>
</dd>
</dl>
<p><code>ALL</code> may be used to denote all of the permissions. For example:</p>
<pre>
        -p Otherj,Otherp
        -p ALL,-Adm</pre>
<p>Notice how <code>ALL</code> is set first and then <a href="#adm"><code>Adm</code></a> taken away in the
second example.</p>
<p>A hexadecimal value is also accepted, but this is intended only for
the benefit of the installation routines.</p>
<p>
</p>
<hr />
<h1><a name="files">FILES</a></h1>
<p><em class="file">~/.gnuspool</em>
configuration file (home directory)</p>
<p><em class="file"> .gnuspool</em>
configuration file (current directory)</p>
<p><em class="file">rest.help</em>
message file</p>
<p><em class="file">pwdump0</em>
dumped password hash file</p>
<p><em class="file">spufile0</em>
user permissions file</p>
<p>
</p>
<hr />
<h1><a name="environment">ENVIRONMENT</a></h1>
<dl>
<dt><strong><a name="gspl_uchange" class="item">GSPL_UCHANGE</a></strong></dt>

<dd>
<p>space-separated options to override defaults.</p>
</dd>
<dt><strong><a name="sprestconf" class="item">SPRESTCONF</a></strong></dt>

<dd>
<p>location of alternative help file.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>gspl-ulist(1),
gspl-user(1),
<code>spsyntax(5)</code>,
gnuspool.conf(5),
gnuspool.hosts(5).</p>
<p>
</p>
<hr />
<h1><a name="diagnostics">DIAGNOSTICS</a></h1>
<p>Various diagnostics are read and printed as required from the message
file, by default <em class="file">rest.help</em>.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2009 Free Software Foundation, Inc.
This is free software. You may redistribute copies of it under the
terms of the GNU General Public License
&lt;http://www.gnu.org/licenses/gpl.html&gt;.
There is NO WARRANTY, to the extent permitted by law.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>John M Collins, Xi Software Ltd.</p>

</body>

</html>
